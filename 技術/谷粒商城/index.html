<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/twelvefish.png" />
    

    <title>
        
          twelvefish
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-exp.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
    
    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<meta name="generator" content="Hexo 6.1.0"></head>

<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/twelvefish.png">
    <span>twelvefish</span>
  </a>
</div>
    <div id="menu" class="book-menu hide">
  <h2 id="技術"><a href="#技術" class="headerlink" title="技術"></a>技術</h2><ul>
<li><a href="/技術/Linux&Shell" class="current-tab">Linux &amp; Shell</a></li>
<li><a href="/技術/MyBatisPlus" class="current-tab">MyBatisPlus</a><!-- - <a href="/技術/谷粒商城" class="current-tab">谷粒商城</a> --></li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h2 id="專題"><a href="#專題" class="headerlink" title="專題"></a>專題</h2><!-- - <a href="/技術/ElasticSearch實戰" class="current-tab">ElasticSearch實戰</a> -->
<!-- - <a href="/技術/TypeScript大戰貪食蛇" class="current-tab">TypeScript大戰貪食蛇</a> -->

<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h2 id="小說"><a href="#小說" class="headerlink" title="小說"></a>小說</h2><ul>
<li><a href="/小說/古之惡來者為王" class="current-tab">古之惡來者為王</a></li>
<li><a href="/小說/喝杯酒，說個故事" class="current-tab">喝杯酒，說個故事</a></li>
<li><a href="/小說/末日之勇者勝" class="current-tab">末日之勇者勝</a></li>
<li><a href="/小說/莫名的愛" class="current-tab">莫名的愛</a></li>
<li><a href="/小說/致，我生命中邂逅的女人們" class="current-tab">致，我生命中邂逅的女人們</a></li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h1 id="版主履歷"><a href="#版主履歷" class="headerlink" title="版主履歷"></a><a href="/版主履歷" class="current-tab">版主履歷</a></h1>
</div>


<script src="/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <h2 id="谷粒商城"><a href="#谷粒商城" class="headerlink" title="谷粒商城"></a>谷粒商城</h2><h2 id="簡介"><a href="#簡介" class="headerlink" title="簡介"></a>簡介</h2><h2 id="第1章、環境搭建"><a href="#第1章、環境搭建" class="headerlink" title="第1章、環境搭建"></a>第1章、環境搭建</h2><p>1、使用vagrant快速安裝Linux虛擬機</p>
<ul>
<li>這裡採用安裝VM Virtualbox</li>
<li>項目中 redis、MySQL、RabbitMQ都是安裝在linux裡面</li>
<li>使用vagrant進行虛擬機建置</li>
<li>安装Centos7<ul>
<li>vagrant init centos&#x2F;7</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/01.PNG"></li>
</ul>
</li>
<li>啟動虛擬機<ul>
<li>vagrant up</li>
</ul>
</li>
<li>連線到虛擬機<ul>
<li>vagrant ssh</li>
</ul>
</li>
<li>重啟虛擬機<ul>
<li>vagrant reload</li>
</ul>
</li>
<li>修改網路配置<ul>
<li>C槽:使用者，路徑下的 Vagrantfile</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/04.PNG"></li>
<li>Ip位置參考網路連線VirtualBox配到的IP，前三碼要一致，最後一碼不用</li>
<li>將 config.vm.network “private_network”, ip: “192.168.56.XX”</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/02.PNG"></li>
<li>測試本機和虛擬機互相ping是否能打通，確保網路能向虛擬機內部溝通</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/03.PNG"></li>
</ul>
</li>
<li>可直接切換root權限，密碼預設 vagrant<ul>
<li>su root</li>
</ul>
</li>
</ul>
<p>2、安裝Docker</p>
<ul>
<li>官方Docker於CentOS安裝教學<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></li>
</ul>
</li>
<li>將docker打開<ul>
<li>sudo systemctl start docker</li>
</ul>
</li>
<li>docker版本<ul>
<li>docker -v</li>
</ul>
</li>
<li>docker開機自啟<ul>
<li>sudo systemctl enable docker</li>
</ul>
</li>
<li>docker裡面有哪些鏡像<ul>
<li>sudo docker images</li>
</ul>
</li>
</ul>
<p>3、安裝mysql 5.7</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a></li>
<li>指定版本指令 sudo docker pull mysql:5.7</li>
<li>映射 mysql 路徑和 啟動 mysql<ul>
<li>sudo docker run -p 3306:3306 –name mysql \</li>
</ul>
<p>  -v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql <br>  -v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql <br>  -v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql&#x2F;conf.d <br>  -e MYSQL_ROOT_PASSWORD&#x3D;root <br>  -d mysql:5.7 </p>
<ul>
<li>docker的3306端口和linux的3306端口對映</li>
<li>linux底下的資料夾&#x2F;mydata&#x2F;mysql 對映到 docker底下的對映路徑，用於方便看log等docker底下的資源</li>
</ul>
</li>
<li>修改mysql配置，用於設定utf8，vi my.cnf<ul>
<li>指令<br>  [client]<br>  default-character-set&#x3D;utf8<br>  [mysql]<br>  default-character-set&#x3D;utf8<br>  [mysqld]<br>  init_connect&#x3D;’SET collation_connection &#x3D; utf8_unicode_ci’<br>  init_connect&#x3D;’SET NAMES utf8’<br>  character-set-server&#x3D;utf8<br>  collation-server&#x3D;utf8_unicode_ci<br>  skip-character-set-client-handshake<br>  skip-name-resolve</li>
</ul>
</li>
<li>重啟mysql<ul>
<li>docker restart mysql</li>
</ul>
</li>
<li>目前開啟的鏡像<ul>
<li>docker ps</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/05.PNG"></li>
</ul>
</li>
</ul>
<p>4、安裝 redis</p>
<ul>
<li>和 mysql大同小異</li>
<li>docker pull redis         </li>
<li>docker run -p 6379:6379 –name redis <br>  -v &#x2F;mydata&#x2F;redis&#x2F;data:&#x2F;data <br>  -v &#x2F;mydata&#x2F;redis&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>  -d redis redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/06.PNG"></li>
<li>持久化redis，否則每次重啟資料就清空了<ul>
<li>echo “appendonly yes”  &gt;&gt; &#x2F;mydata&#x2F;redis&#x2F;conf&#x2F;redis.conf</li>
</ul>
</li>
<li>使用redis cli<ul>
<li>docker exec -it redis redis-cli</li>
</ul>
</li>
<li>設置持久化後，就算重啟redis，原本存放資料依然存在<ul>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/07.PNG"></li>
</ul>
</li>
</ul>
<p>5、用UI介面確認安裝的mysql和redis能夠訪問</p>
<ul>
<li>每次重起虛擬機，docker會自動將mysql、redis啟動<ul>
<li>sudo docker update redis –restart&#x3D;always</li>
<li>sudo docker update mysql –restart&#x3D;always</li>
</ul>
</li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/08.PNG"></li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/09.PNG"></li>
<li><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/10.PNG"></li>
</ul>
<p>6、異常狀況</p>
<ul>
<li><p>磁碟空間被 vagrant 占滿了</p>
<ul>
<li>解決方法 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/nio-nio/p/13616415.html">https://www.cnblogs.com/nio-nio/p/13616415.html</a><h2 id="第2章、微服務搭建"><a href="#第2章、微服務搭建" class="headerlink" title="第2章、微服務搭建"></a>第2章、微服務搭建</h2></li>
</ul>
</li>
<li><p>商品服務 product</p>
</li>
<li><p>倉儲服務 ware</p>
</li>
<li><p>訂單服務 order</p>
</li>
<li><p>優惠卷服務 coupon</p>
</li>
<li><p>用戶服務 member</p>
</li>
<li><p><img src="/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/11.PNG"></p>
</li>
<li><p>lombok @Data 增加get set方法</p>
</li>
</ul>

</div>


  <div class="book-comments">
    




  </div>



<script src="/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

    <div class="author">
  
      <!-- Author image -->
      <div class="author-img">
        
          <figure class="avatar avatar-lg">
            <img src="/twelvefish.png" alt="...">
          </figure>
        
      </div>
  
      <!-- Author title -->
      <div class="author-title">
        <div>十鱷魚</div>
        <!-- <div>2023-04-03</div> -->
      </div>
    </div>
  
    
  
    <div class="divider"></div>
  </div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>

</div>
      </div>
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

</body>
</html>


<script src="/js/book.js"></script>
